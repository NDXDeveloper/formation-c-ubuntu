üîù Retour au [Sommaire](/SOMMAIRE.md)

# 13.1.3 Structure d'un CMakeLists.txt

## Introduction

Un fichier `CMakeLists.txt` bien structur√© est comme une recette de cuisine bien √©crite : il doit √™tre facile √† lire, logique dans son organisation, et permettre de comprendre rapidement ce que fait le projet. Dans cette section, nous allons apprendre √† structurer correctement ce fichier, des projets simples aux plus complexes.

## Anatomie d'un CMakeLists.txt minimal

Reprenons notre Hello World et d√©composons-le en sections logiques :

```cmake
# ============================================
# Section 1 : M√©tadonn√©es du projet
# ============================================
cmake_minimum_required(VERSION 3.15)  
project(HelloCMake VERSION 1.0.0 LANGUAGES C)  

# ============================================
# Section 2 : D√©finition des targets
# ============================================
add_executable(hello main.c)
```

M√™me pour un projet minimal, cette organisation en sections facilite la lecture.

## Les sections d'un CMakeLists.txt complet

Un projet r√©aliste suit g√©n√©ralement cette structure en **7 sections** :

```cmake
# ============================================
# 1. M√âTADONN√âES ET CONFIGURATION MINIMALE
# ============================================
cmake_minimum_required(VERSION 3.15)  
project(MonProjet VERSION 1.2.3 LANGUAGES C)  

# ============================================
# 2. OPTIONS DU PROJET
# ============================================
option(BUILD_TESTS "Compiler les tests unitaires" ON)  
option(ENABLE_SANITIZERS "Activer AddressSanitizer" OFF)  

# ============================================
# 3. CONFIGURATION DU COMPILATEUR
# ============================================
set(CMAKE_C_STANDARD 11)  
set(CMAKE_C_STANDARD_REQUIRED ON)  
add_compile_options(-Wall -Wextra -pedantic)  

# ============================================
# 4. RECHERCHE DES D√âPENDANCES
# ============================================
find_package(OpenSSL REQUIRED)  
find_package(Threads REQUIRED)  

# ============================================
# 5. D√âFINITION DES TARGETS (BIBLIOTH√àQUES)
# ============================================
add_library(ma_lib
    src/utils.c
    src/parser.c
)
target_include_directories(ma_lib PUBLIC include)

# ============================================
# 6. D√âFINITION DES TARGETS (EX√âCUTABLES)
# ============================================
add_executable(mon_app src/main.c)  
target_link_libraries(mon_app ma_lib OpenSSL::SSL Threads::Threads)  

# ============================================
# 7. TESTS ET INSTALLATION (OPTIONNEL)
# ============================================
if(BUILD_TESTS)
    enable_testing()
    add_subdirectory(tests)
endif()

install(TARGETS mon_app DESTINATION bin)
```

Passons en revue chaque section en d√©tail.

---

## Section 1 : M√©tadonn√©es et configuration minimale

### cmake_minimum_required()

```cmake
cmake_minimum_required(VERSION 3.15)
```

**Obligatoire.** Doit √™tre la **premi√®re ligne** du fichier.

**Pourquoi ?**
- Garantit que l'utilisateur a une version compatible de CMake
- D√©finit le comportement de CMake (les versions ont des politiques diff√©rentes)
- √âvite les erreurs cryptiques dues √† des incompatibilit√©s

**Quelle version choisir ?**

| Version | Date | Recommandation |
|---------|------|----------------|
| 3.10 | 2017 | Minimum absolu (Ubuntu 18.04) |
| 3.15 | 2019 | ‚úÖ **Recommand√© pour d√©buter** (bon compromis) |
| 3.20 | 2021 | Moderne, mais exclut Ubuntu 20.04 par d√©faut |
| 3.25+ | 2023+ | Tr√®s r√©cent, n√©cessite installation manuelle |

> üí° **Conseil** : Utilisez 3.15 sauf si vous avez besoin d'une fonctionnalit√© sp√©cifique d'une version plus r√©cente.

### project()

```cmake
project(MonProjet VERSION 1.0.0 LANGUAGES C)
```

**Obligatoire.** D√©clare le nom et les m√©tadonn√©es du projet.

**Syntaxe compl√®te :**
```cmake
project(<nom>
    VERSION <version>
    DESCRIPTION "<description>"
    LANGUAGES <langages>
)
```

**Exemples :**

```cmake
# Minimal
project(MiniParser C)

# Avec version
project(LogParser VERSION 2.1.4 LANGUAGES C)

# Complet
project(WebServer
    VERSION 3.0.0
    DESCRIPTION "Serveur HTTP l√©ger pour syst√®mes embarqu√©s"
    LANGUAGES C
)

# Multi-langage
project(MixApp LANGUAGES C CXX)  # C et C++
```

**Ce que fait project() :**
1. D√©finit des variables CMake utiles :
   - `PROJECT_NAME` ‚Üí `"MonProjet"`
   - `PROJECT_VERSION` ‚Üí `"1.0.0"`
   - `PROJECT_SOURCE_DIR` ‚Üí Chemin du r√©pertoire source
   - `PROJECT_BINARY_DIR` ‚Üí Chemin du r√©pertoire de build
2. D√©tecte automatiquement les compilateurs pour les langages sp√©cifi√©s
3. Initialise l'environnement de build

---

## Section 2 : Options du projet

Les options permettent √† l'utilisateur de personnaliser le build :

```cmake
option(BUILD_TESTS "Compiler les tests unitaires" ON)  
option(BUILD_DOCS "G√©n√©rer la documentation Doxygen" OFF)  
option(ENABLE_ASAN "Activer AddressSanitizer (debug)" OFF)  
option(STATIC_LINKING "Lier statiquement les biblioth√®ques" OFF)  
```

**Syntaxe :**
```cmake
option(<nom> "<description>" <valeur_par_defaut>)
```

**Utilisation :**

L'utilisateur peut activer/d√©sactiver ces options lors de la configuration :

```bash
# Activer les tests
cmake -B build -DBUILD_TESTS=ON

# D√©sactiver la documentation
cmake -B build -DBUILD_DOCS=OFF

# Activer plusieurs options
cmake -B build -DBUILD_TESTS=ON -DENABLE_ASAN=ON
```

**Utilisation dans le CMakeLists.txt :**

```cmake
option(BUILD_TESTS "Compiler les tests" ON)

# Plus loin dans le fichier...
if(BUILD_TESTS)
    enable_testing()
    add_subdirectory(tests)
endif()
```

**Bonnes pratiques pour les options :**
- Noms en MAJUSCULES avec underscore : `BUILD_TESTS`, `ENABLE_FEATURE`
- Descriptions claires et concises
- Valeur par d√©faut pertinente (g√©n√©ralement `ON` pour les tests, `OFF` pour les features exp√©rimentales)

---

## Section 3 : Configuration du compilateur

### Standard du langage

```cmake
# Utiliser le standard C11
set(CMAKE_C_STANDARD 11)  
set(CMAKE_C_STANDARD_REQUIRED ON)  
```

**Explications :**
- `CMAKE_C_STANDARD` : Version du standard C √† utiliser (99, 11, 17, 23)
- `CMAKE_C_STANDARD_REQUIRED` : Si `ON`, √©choue si le compilateur ne supporte pas ce standard

**√âquivalent en flags gcc :**
```cmake
# Ce que CMake g√©n√®re automatiquement
# gcc -std=c11 ...
```

### Flags de compilation globaux

```cmake
# Ajouter des warnings
add_compile_options(-Wall -Wextra -pedantic)

# Flags sp√©cifiques au mode Debug
if(CMAKE_BUILD_TYPE STREQUAL "Debug")
    add_compile_options(-g -O0)
endif()

# Flags sp√©cifiques au mode Release
if(CMAKE_BUILD_TYPE STREQUAL "Release")
    add_compile_options(-O3 -DNDEBUG)
endif()
```

**Diff√©rence entre les m√©thodes :**

| M√©thode | Port√©e | Usage |
|---------|--------|-------|
| `add_compile_options()` | **Tous les targets** du projet | Flags globaux (warnings, standard) |
| `target_compile_options()` | **Un seul target** | Flags sp√©cifiques √† une biblioth√®que/ex√©cutable |

**Exemple avec target_compile_options :**
```cmake
add_executable(mon_app main.c)

# Ajouter -DDEBUG_MODE uniquement pour mon_app
target_compile_options(mon_app PRIVATE -DDEBUG_MODE)
```

### Configuration selon le syst√®me d'exploitation

```cmake
if(WIN32)
    # Options sp√©cifiques √† Windows
    add_compile_definitions(_CRT_SECURE_NO_WARNINGS)
elseif(UNIX)
    # Options sp√©cifiques √† Linux/macOS
    add_compile_options(-fPIC)
endif()
```

---

## Section 4 : Recherche des d√©pendances

Les projets r√©els utilisent souvent des biblioth√®ques externes (OpenSSL, libcurl, threads, etc.).

### find_package() : Recherche automatique

```cmake
# Rechercher OpenSSL (optionnel)
find_package(OpenSSL)

# Rechercher OpenSSL (obligatoire, √©choue si absent)
find_package(OpenSSL REQUIRED)

# Rechercher plusieurs biblioth√®ques
find_package(CURL REQUIRED)  
find_package(Threads REQUIRED)  
find_package(ZLIB)  
```

**Ce que fait find_package() :**
1. Cherche la biblioth√®que dans les chemins standards du syst√®me
2. Si trouv√©e, d√©finit des variables et des **targets import√©s** :
   - Pour OpenSSL : `OpenSSL::SSL`, `OpenSSL::Crypto`
   - Pour Threads : `Threads::Threads`
   - Pour CURL : `CURL::libcurl`
3. Si `REQUIRED` et non trouv√©e : CMake arr√™te avec une erreur claire

**V√©rifier si une biblioth√®que a √©t√© trouv√©e :**

```cmake
find_package(ZLIB)

if(ZLIB_FOUND)
    message(STATUS "ZLIB trouv√© : ${ZLIB_VERSION}")
else()
    message(WARNING "ZLIB non trouv√©, compression d√©sactiv√©e")
endif()
```

### Utilisation des biblioth√®ques trouv√©es

```cmake
add_executable(mon_app main.c)

# Lier OpenSSL √† mon_app
target_link_libraries(mon_app OpenSSL::SSL OpenSSL::Crypto)
```

CMake g√®re automatiquement :
- Les chemins d'include (`-I/usr/include/openssl`)
- Les biblioth√®ques √† lier (`-lssl -lcrypto`)
- Les d√©pendances transitives

---

## Section 5 : D√©finition des targets (biblioth√®ques)

### Cr√©er une biblioth√®que

```cmake
add_library(ma_lib
    src/utils.c
    src/parser.c
    src/network.c
)
```

**Types de biblioth√®ques :**

```cmake
# Biblioth√®que statique (.a sur Linux)
add_library(ma_lib STATIC src/utils.c)

# Biblioth√®que dynamique (.so sur Linux)
add_library(ma_lib SHARED src/utils.c)

# Laisse CMake d√©cider (recommand√©)
add_library(ma_lib src/utils.c)
```

### D√©finir les r√©pertoires d'include

```cmake
add_library(ma_lib src/utils.c src/parser.c)

# Les fichiers .h sont dans include/
target_include_directories(ma_lib PUBLIC include)
```

**Niveaux de visibilit√© :**

| Mot-cl√© | Signification | Usage |
|---------|---------------|-------|
| `PUBLIC` | Visible par la lib **et** ceux qui l'utilisent | Headers d'API publique |
| `PRIVATE` | Visible uniquement par la lib elle-m√™me | Headers internes |
| `INTERFACE` | Visible uniquement par ceux qui utilisent la lib | Headers "header-only" |

**Exemple pratique :**

```cmake
add_library(ma_lib
    src/utils.c      # Impl√©mentation
    src/parser.c
)

# API publique : include/mylib/api.h
target_include_directories(ma_lib PUBLIC include)

# Headers internes : src/internal.h
target_include_directories(ma_lib PRIVATE src)
```

Structure du projet :
```
mon_projet/
‚îú‚îÄ‚îÄ include/
‚îÇ   ‚îî‚îÄ‚îÄ mylib/
‚îÇ       ‚îî‚îÄ‚îÄ api.h          # PUBLIC : utilisateurs de ma_lib peuvent l'inclure
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ utils.c
‚îÇ   ‚îú‚îÄ‚îÄ parser.c
‚îÇ   ‚îî‚îÄ‚îÄ internal.h         # PRIVATE : seulement pour l'impl√©mentation
‚îî‚îÄ‚îÄ CMakeLists.txt
```

---

## Section 6 : D√©finition des targets (ex√©cutables)

### Cr√©er un ex√©cutable

```cmake
add_executable(mon_app src/main.c)
```

### Lier avec des biblioth√®ques

```cmake
add_executable(mon_app src/main.c)

# Lier avec la biblioth√®que interne
target_link_libraries(mon_app ma_lib)

# Lier avec des biblioth√®ques externes
target_link_libraries(mon_app
    ma_lib           # Notre biblioth√®que
    OpenSSL::SSL     # OpenSSL
    Threads::Threads # pthread
    m                # libm (math√©matiques)
)
```

### Ajouter des defines

```cmake
add_executable(mon_app src/main.c)

# D√©finir VERSION_STRING="1.0.0" uniquement pour mon_app
target_compile_definitions(mon_app PRIVATE
    VERSION_STRING="${PROJECT_VERSION}"
    DEBUG_ENABLED
)
```

Cela g√©n√®re :
```c
// √âquivalent en C
#define VERSION_STRING "1.0.0"
#define DEBUG_ENABLED
```

---

## Section 7 : Tests et installation

### Tests avec CTest

```cmake
# Activer le support des tests
enable_testing()

# Ajouter un test
add_test(NAME test_basic COMMAND mon_app --test)

# Ou utiliser add_executable pour les tests
add_executable(test_utils tests/test_utils.c)  
target_link_libraries(test_utils ma_lib)  
add_test(NAME test_utils COMMAND test_utils)  
```

Ex√©cution :
```bash
cmake --build build  
ctest --test-dir build  
```

### Installation

```cmake
# Installer l'ex√©cutable dans /usr/local/bin
install(TARGETS mon_app DESTINATION bin)

# Installer les headers publics
install(DIRECTORY include/ DESTINATION include)

# Installer la biblioth√®que
install(TARGETS ma_lib
    LIBRARY DESTINATION lib
    ARCHIVE DESTINATION lib
)
```

Utilisation :
```bash
cmake --build build  
sudo cmake --install build  # Installe dans /usr/local  
```

---

## Exemple complet : Projet structur√©

Voici un `CMakeLists.txt` complet pour un projet r√©aliste :

```cmake
# ============================================
# 1. M√âTADONN√âES
# ============================================
cmake_minimum_required(VERSION 3.15)

project(LogParser
    VERSION 2.1.0
    DESCRIPTION "Parser de logs haute performance"
    LANGUAGES C
)

# ============================================
# 2. OPTIONS
# ============================================
option(BUILD_TESTS "Compiler les tests unitaires" ON)  
option(BUILD_DOCS "G√©n√©rer la documentation Doxygen" OFF)  
option(ENABLE_ASAN "Activer AddressSanitizer" OFF)  

# ============================================
# 3. CONFIGURATION COMPILATEUR
# ============================================
set(CMAKE_C_STANDARD 11)  
set(CMAKE_C_STANDARD_REQUIRED ON)  

# Warnings
add_compile_options(-Wall -Wextra -pedantic)

# AddressSanitizer (si activ√©)
if(ENABLE_ASAN)
    add_compile_options(-fsanitize=address -fno-omit-frame-pointer)
    add_link_options(-fsanitize=address)
endif()

# ============================================
# 4. D√âPENDANCES
# ============================================
find_package(Threads REQUIRED)

# PCRE2 pour les regex (optionnel)
find_package(PCRE2)  
if(PCRE2_FOUND)  
    message(STATUS "PCRE2 trouv√© : support des regex activ√©")
else()
    message(WARNING "PCRE2 non trouv√© : regex d√©sactiv√©es")
endif()

# ============================================
# 5. BIBLIOTH√àQUE INTERNE
# ============================================
add_library(logparser_core
    src/parser.c
    src/tokenizer.c
    src/stats.c
)

# Headers publics
target_include_directories(logparser_core PUBLIC
    ${PROJECT_SOURCE_DIR}/include
)

# Headers priv√©s
target_include_directories(logparser_core PRIVATE
    ${PROJECT_SOURCE_DIR}/src
)

# Lier avec les d√©pendances
target_link_libraries(logparser_core PUBLIC Threads::Threads)

if(PCRE2_FOUND)
    target_link_libraries(logparser_core PUBLIC PCRE2::8BIT)
    target_compile_definitions(logparser_core PUBLIC HAVE_PCRE2)
endif()

# ============================================
# 6. EX√âCUTABLE PRINCIPAL
# ============================================
add_executable(logparser src/main.c)

target_link_libraries(logparser
    logparser_core
    m  # libm pour les calculs statistiques
)

# Version dans le code
target_compile_definitions(logparser PRIVATE
    VERSION="${PROJECT_VERSION}"
)

# ============================================
# 7. TESTS
# ============================================
if(BUILD_TESTS)
    enable_testing()

    # Test du parser
    add_executable(test_parser tests/test_parser.c)
    target_link_libraries(test_parser logparser_core)
    add_test(NAME test_parser COMMAND test_parser)

    # Test du tokenizer
    add_executable(test_tokenizer tests/test_tokenizer.c)
    target_link_libraries(test_tokenizer logparser_core)
    add_test(NAME test_tokenizer COMMAND test_tokenizer)
endif()

# ============================================
# 8. INSTALLATION
# ============================================
install(TARGETS logparser DESTINATION bin)  
install(DIRECTORY include/ DESTINATION include)  
install(TARGETS logparser_core  
    LIBRARY DESTINATION lib
    ARCHIVE DESTINATION lib
)

# ============================================
# 9. INFORMATIONS DE BUILD
# ============================================
message(STATUS "")  
message(STATUS "Configuration de LogParser ${PROJECT_VERSION}")  
message(STATUS "  Build type:      ${CMAKE_BUILD_TYPE}")  
message(STATUS "  Compilateur C:   ${CMAKE_C_COMPILER_ID} ${CMAKE_C_COMPILER_VERSION}")  
message(STATUS "  Tests:           ${BUILD_TESTS}")  
message(STATUS "  PCRE2:           ${PCRE2_FOUND}")  
message(STATUS "  AddressSanitizer: ${ENABLE_ASAN}")  
message(STATUS "")  
```

Sortie lors de la configuration :
```
-- Configuration de LogParser 2.1.0
  Build type:      Release
  Compilateur C:   GNU 11.4.0
  Tests:           ON
  PCRE2:           TRUE
  AddressSanitizer: OFF

-- Configuring done
-- Generating done
```

---

## Bonnes pratiques de structuration

### 1. Commentaires et sections

```cmake
# ============================================
# TITRE DE SECTION (tout en majuscules)
# ============================================

# Commentaire explicatif sur plusieurs lignes :
# Cette section configure les options de s√©curit√©
# pour le build en production
```

### 2. Ordre des commandes

‚úÖ **Bon ordre** :
```cmake
1. cmake_minimum_required()
2. project()
3. options et variables
4. configuration compilateur
5. find_package()
6. add_library() / add_executable()
7. target_*() pour configurer les targets
8. tests et installation
```

‚ùå **Mauvais ordre** :
```cmake
add_executable(app main.c)          # ‚ùå Avant project()  
project(MyApp)  
cmake_minimum_required(VERSION 3.15) # ‚ùå Devrait √™tre en premier  
```

### 3. Nommage coh√©rent

```cmake
# Variables : SCREAMING_SNAKE_CASE
set(MY_CUSTOM_PATH "/usr/local")

# Targets : snake_case ou kebab-case
add_library(my_lib src/utils.c)  
add_executable(my-app src/main.c)  

# Options : SCREAMING_SNAKE_CASE avec pr√©fixe
option(MYPROJECT_BUILD_TESTS "..." ON)
```

### 4. √âviter les chemins absolus

‚ùå **Mauvais** :
```cmake
target_include_directories(my_lib PUBLIC
    /home/user/projet/include  # ‚ùå Ne fonctionne que sur votre machine
)
```

‚úÖ **Bon** :
```cmake
target_include_directories(my_lib PUBLIC
    ${PROJECT_SOURCE_DIR}/include  # ‚úÖ Relatif au projet
)
```

### 5. Messages informatifs

```cmake
message(STATUS "Configuration du projet...")  
message(WARNING "OpenSSL non trouv√©, HTTPS d√©sactiv√©")  
message(FATAL_ERROR "Compilateur C++ requis mais non trouv√©")  
```

**Types de messages :**
- `STATUS` : Information normale (en blanc/gris)
- `WARNING` : Avertissement (en jaune)
- `FATAL_ERROR` : Erreur bloquante, arr√™te CMake (en rouge)

---

## Variables CMake utiles

CMake d√©finit automatiquement de nombreuses variables :

### Variables de chemins

```cmake
PROJECT_SOURCE_DIR    # R√©pertoire du CMakeLists.txt principal  
PROJECT_BINARY_DIR    # R√©pertoire de build (ex: build/)  
CMAKE_CURRENT_SOURCE_DIR  # R√©pertoire du CMakeLists.txt actuel  
CMAKE_CURRENT_BINARY_DIR  # R√©pertoire de build actuel  
```

### Variables de configuration

```cmake
CMAKE_BUILD_TYPE      # Debug, Release, RelWithDebInfo, MinSizeRel  
CMAKE_C_COMPILER      # Chemin du compilateur C  
CMAKE_C_COMPILER_ID   # GNU, Clang, MSVC...  
CMAKE_SYSTEM_NAME     # Linux, Windows, Darwin (macOS)  
```

### Utilisation

```cmake
message(STATUS "Build directory: ${PROJECT_BINARY_DIR}")

if(CMAKE_BUILD_TYPE STREQUAL "Debug")
    target_compile_definitions(my_app PRIVATE DEBUG_MODE)
endif()

if(CMAKE_SYSTEM_NAME STREQUAL "Linux")
    target_link_libraries(my_app dl)  # libdl uniquement sur Linux
endif()
```

---

## Structure pour projets multi-modules

Pour des projets plus grands, on utilise plusieurs `CMakeLists.txt` :

```
mon_projet/
‚îú‚îÄ‚îÄ CMakeLists.txt              # Principal (racine)
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ CMakeLists.txt         # Pour les sources
‚îÇ   ‚îú‚îÄ‚îÄ main.c
‚îÇ   ‚îî‚îÄ‚îÄ utils.c
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îú‚îÄ‚îÄ CMakeLists.txt         # Pour les biblioth√®ques
‚îÇ   ‚îú‚îÄ‚îÄ parser/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CMakeLists.txt
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ parser.c
‚îÇ   ‚îî‚îÄ‚îÄ network/
‚îÇ       ‚îú‚îÄ‚îÄ CMakeLists.txt
‚îÇ       ‚îî‚îÄ‚îÄ network.c
‚îî‚îÄ‚îÄ tests/
    ‚îú‚îÄ‚îÄ CMakeLists.txt         # Pour les tests
    ‚îî‚îÄ‚îÄ test_utils.c
```

**CMakeLists.txt principal (racine) :**
```cmake
cmake_minimum_required(VERSION 3.15)  
project(MonProjet C)  

# Inclure les sous-r√©pertoires
add_subdirectory(lib)  
add_subdirectory(src)  
add_subdirectory(tests)  
```

**lib/CMakeLists.txt :**
```cmake
# Inclure les modules
add_subdirectory(parser)  
add_subdirectory(network)  
```

**lib/parser/CMakeLists.txt :**
```cmake
add_library(parser parser.c)  
target_include_directories(parser PUBLIC ${CMAKE_CURRENT_SOURCE_DIR})  
```

Cette organisation permet de maintenir des fichiers CMake lisibles m√™me pour de tr√®s gros projets.

---

## R√©capitulatif : Checklist d'un bon CMakeLists.txt

‚úÖ **Structure :**
- [ ] `cmake_minimum_required()` en premi√®re ligne
- [ ] `project()` avec version et description
- [ ] Sections logiques avec commentaires
- [ ] Ordre coh√©rent des commandes

‚úÖ **Configuration :**
- [ ] Standard C d√©fini (`CMAKE_C_STANDARD`)
- [ ] Options utilisateur avec `option()`
- [ ] Warnings activ√©s (`-Wall -Wextra`)

‚úÖ **Targets :**
- [ ] Noms explicites pour les targets
- [ ] `target_include_directories()` avec PUBLIC/PRIVATE
- [ ] `target_link_libraries()` pour les d√©pendances

‚úÖ **Portabilit√© :**
- [ ] Pas de chemins absolus
- [ ] Variables CMake (`${PROJECT_SOURCE_DIR}`)
- [ ] D√©pendances g√©r√©es avec `find_package()`

‚úÖ **Maintenance :**
- [ ] Commentaires pour les sections complexes
- [ ] Messages informatifs (`message(STATUS ...)`)
- [ ] Tests activables (`option(BUILD_TESTS ...)`)

---

## Conclusion

La structure d'un `CMakeLists.txt` peut sembler rigide au d√©but, mais elle garantit :
- **Lisibilit√©** : N'importe qui peut comprendre le projet rapidement
- **Maintenabilit√©** : Facile d'ajouter de nouvelles fonctionnalit√©s
- **Portabilit√©** : Fonctionne sur Linux, Windows, macOS sans modification
- **Scalabilit√©** : Peut g√©rer des projets de 10 √† 10 000 fichiers

Avec cette structure en t√™te, vous √™tes pr√™t √† cr√©er des projets CMake professionnels !

---


‚è≠Ô∏è [Targets, properties et generators](/13-build-systems/01.4-targets-properties.md)
